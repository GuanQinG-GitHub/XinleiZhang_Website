# 李群与李代数学习小结

## 根本问题：对旋转矩阵的求导

李群与李代数的引入，是为了解决旋转矩阵的微积分问题，利用旋转矩阵的微积分，就可以实现对姿态估计的优化。**因为在实际中，经常需要构建与位姿有关的函数，然后讨论该函数关于位姿的导数以调整当前的估计值。**

旋转矩阵和变换矩阵，存在冗余性，也就是常说的自身内部存在约束。当对旋转矩阵进行线性变换时，其约束就会被破坏，也就不再是旋转矩阵。但是根据导数的定义，对旋转矩阵之间进行线性变换必不可免，如：

假设我们对空间中一个向量$\vec{\bold p}$左乘旋转矩阵$\bold R$，即进行一次旋转，得到$\bold R\bold{\vec{p}}$，则该次旋转对旋转矩阵的求导即为下式（缺乏严谨性的写法），

$$
\frac{\partial(\bold{R}\bold {\vec{p}})}{\partial\bold R}\not=\underset{\bold{\delta R}\to0}{\lim}\frac{\overbrace{(\bold R+\delta\bold R)}^{\text{不再是旋转矩阵}}\bold{\vec{p}}-\bold R\bold{\vec{p}}}{\delta\bold R}
$$

因此引入李代数的概念来实现对旋转矩阵的求导。

## 李代数的引入

李代数描述了对应李群的局部性质。**一个旋转矩阵有一个对应的李代数，这个李代数描述了该旋转矩阵的性质。**

在实际应用中，旋转矩阵是随时间连续变化，根据Orthogonal Matrix 定义，

$$
\bold R(t)\bold R(t)^T=\bold I
$$

两边对时间求导，

$$
\dot{\bold R}(t)\bold R(t)^T+\bold R(t)\dot{\bold R}(t)^T=0
$$

化简之后可以得到，

$$
\colorbox{aqua}{$\dot{\bold R}(t)=\phi(t)^\land\bold R(t)$}
$$

$$
\phi^\land=\begin{bmatrix}0 & -\phi_3 & \phi_2\\\phi_3 & 0 & -\phi_1\\-\phi_2 & \phi_1 & 0 \end{bmatrix}
$$

这里$\phi(t)$是一个三维的向量，经过反对称变换之后变成3×3的矩阵。

**由此，令旋转矩阵对时间求导，只需左乘一个反对称矩阵。基于此，该三维向量$\phi(t)$参与构成旋转矩阵的导数，即能反映旋转矩阵的性质。数学上将其称为旋转矩阵的李代数。**

值得一提的是对$\phi(t)^{\land}$作指数映射，泰勒展开后化简，结合罗德里格斯公式，可以发现$\phi(t)$实质上是和原旋转矩阵对应的旋转向量$\theta\bold{\vec{a}}$，

$$
\exp(\bold\phi(t)^{\land})=\exp(\theta\bold{\vec{a}}^{\land})=cos(\theta)\bold I+(1-cos(\theta))\bold {\vec{a}}\bold{\vec{a}}^T+sin(\theta)\bold{\vec{a}}^{\land}=\bold R
$$

## 对李代数的求导

旋转矩阵对应李代数是一个三维空间的向量，本质上更是该旋转矩阵对应的旋转向量，自身具有向量的线性可加性，**因此可将对旋转矩阵求导等价为对该旋转矩阵对应李代数进行求导**。**因为旋转矩阵的李代数（旋转向量）描述了该旋转矩阵的相关性质，并且旋转矩阵群到李代数（旋转向量）为满射，即每个李代数（旋转向量）对应唯一的旋转矩阵，因此该求导的等价过程同样具有实际意义。**

$$
\frac{\partial(\bold R\bold{\vec{p}})}{\partial (\bold R)}\implies\frac{\partial(exp(\phi(t)^{\land}\bold{\vec{p}}))}{\partial(\phi(t))}=\underset{\delta\phi\to0}{\lim}\frac{\exp((\overbrace{\phi(t)+\delta\phi}^{\text{仍为旋转向量}})^{\land})\bold{\vec{p}}-\exp(\phi(t)^{\land})\bold{\vec{p}}}{\delta\phi}=-(\bold R\bold{\vec{p}})^{\land}\bold{J_L}
$$

式中$\bold{J_L}$是可根据李代数确定的系数矩阵。

至此，我们能计算出旋转后的向量对于该旋转矩阵对应李代数的导数。此外，有另一种对旋转矩阵进行求导的方式，即扰动模型。假设存在微小扰动$\Delta\bold R$，对应李代数（旋转向量为$\delta\phi$），作用在原旋转$\bold R\bold{\vec{p}}$，则，

$$
\frac{\partial(\bold R\bold{\vec{p}})}{\partial\bold R}\implies\frac{\partial(\bold R\bold{\vec{p}})}{\partial\delta\phi}=\underset{\delta\phi\to0}{\lim}\frac{\exp(\delta\phi^{\land})\exp(\phi^{\land})\bold{\vec{p}}-\exp(\phi^{\land})}{\delta\phi}=-(\bold R\bold{\vec{p}})^{\land}
$$

在实际应用中，扰动模型同样能表示对旋转矩阵的求导，且结果更为简单，因此更为实用。

## 总结

至此，我们已经能够对旋转矩阵进行微分运算，能用于解决旋转矩阵的微积分问题。虽然以上只针对旋转矩阵进行运算，对于变换矩阵而言方法相同。以上内容只针对李群与李代数整体思想的介绍，省略了具体的数学推导。

### 以上内容参考《视觉SLAM十四讲》，书中主要讲解了如何将李群与李代数应用在位姿估计。
